#!/bin/bash -x

function make_popular_hashes() {
	clear
	rm data/100k_common_passwords.txt
	rm data/100k_common_passwords_md5.txt

	read -p "Let's generate some hashes from a list of popular passwords."
	echo "We have a list of 10 million passwords:"
	head -10 data/10m_top_passwords.txt

	read -p "Next we will generate a smaller list of passwords (10 million to 10 thousand)"
	awk 'NR % 100 == 0 || NR == 1' data/10m_top_passwords.txt > data/100k_common_passwords.txt
	echo "Now we have a evenly-distributed sample of 10000 passwords:"
	cat data/10m_top_passwords.txt | wc -l
	head -10 data/100k_common_passwords.txt

	read -p "Next we will create a list of md5 hashes from the password list"
	for i in $(cat data/100k_common_passwords.txt); do echo -n "$i"| md5sum | tr -d " -" >> data/100k_common_passwords_md5.txt; done
	echo "Now we have md5 hashes of the 10000 passwords:"
	head -10 data/100k_common_passwords_md5.txt
}

function crack_hashes_simple() {
	clear

}

make_popular_hashes
